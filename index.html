<!DOCTYPE html>
<html lang="en">
<head>
    <title>Secret Santa</title>
    <link rel="stylesheet" href="test.css">
</head>
<body>

<!-- PAGE 1: SET LIMIT -->
<div id="pageLimit" style="display: flex; width: 100vw; height: 100vh; align-items:center; justify-content:center; flex-direction:column;">
    <h2 style="color:white; font-size:40px;">Set the Number Limit</h2>

    <input type="number" id="numberLimit" placeholder="Enter limit" min="1">

    <button id="confirmLimit" style="margin-top:20px;">Confirm</button>
</div>


<!-- PAGE 2: GENERATOR -->
<div id="pageGenerator" style="display: none; width: 100vw; height: 100vh; align-items:center; justify-content:center; flex-direction:column;"">

<div style="display: flex; width: 100%; min-height: 100vh;">
  
  <!-- LEFT SIDE -->
  <div style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;">
    
    <div id="santa">
      <p></p>
    </div>

    <button id="button">Generate</button>
    <input type="reset" value="Reset" onclick="location.reload()">

    <h4>Click to Unwrap the Mystery and Share the Joy</h4>
    <h5>Created by Godswill Ubani</h5>
    <h6>i4nnova Intern</h6>
  </div>

  <!-- RIGHT SIDE -->
  <div class="right">
    <h3>Generated Numbers</h3>
    <table id="numberTable">
      <thead><tr></tr></thead>
      <tbody></tbody>
    </table>
  </div>

</div>

</div>


<script>
// ELEMENTS
var pageLimit = document.getElementById("pageLimit");
var pageGenerator = document.getElementById("pageGenerator");
var santa = document.getElementById("santa");
var button = document.getElementById("button");
var numberLimitInput = document.getElementById("numberLimit");
var tableBody = document.querySelector("#numberTable tbody");
var usedNumbers = new Set();
var limit = 21;

// CONFIRM LIMIT â†’ SHOW PAGE 2
document.getElementById("confirmLimit").addEventListener("click", function() {
    let val = parseInt(numberLimitInput.value);

    if (!val || val < 1) {
        alert("Please enter a valid number.");
        return;
    }

    limit = val;

    // Hide page 1 and show page 2
    pageLimit.style.display = "none";
    pageGenerator.style.display = "block";
});


// GENERATE BUTTON
button.addEventListener("click", () => {
    if (usedNumbers.size >= limit) {
        santa.innerHTML = "Done!";
        return;
    }

    let x;
    do {
        x = Math.floor(Math.random() * limit) + 1;
    } while (usedNumbers.has(x));

    usedNumbers.add(x);
    santa.innerHTML = x;

    // Update table in rows of 3
    let nums = Array.from(usedNumbers);
    tableBody.innerHTML = "";
    for (let i = 0; i < nums.length; i += 3) {
        let row = document.createElement("tr");
        row.innerHTML = `
            <td>${nums[i] ?? ""}</td>
            <td>${nums[i+1] ?? ""}</td>
            <td>${nums[i+2] ?? ""}</td>
        `;
        tableBody.appendChild(row);
    }
});
</script>

</body>
</html>
