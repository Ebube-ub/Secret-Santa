<!DOCTYPE html>
<html lang="en">
<head>
    <title>Secret Santa</title>
    <link rel="stylesheet" href="secret_santa.css">
</head> 
<body>

<div style="display: flex; width: 100vw; min-height: 100vh;">
  <div style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;">
    <div id="santa">
      <p></p>
    </div>
    <button id="button">Generate</button>
    <input type="reset" value="Reset" onclick="location.reload()">
    <h4>Click to Unwrap the Mystery and Share the Joy</h4>
  </div>
  <div class="right">
    <h3>Generated Numbers</h3>
    <table id="numberTable">
      <thead>
        <tr>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>
<script>
   var santa = document.getElementById("santa");
   var button = document.getElementById("button");
   var usedNumbers = new Set();
   var tableBody = document.querySelector("#numberTable tbody");
   
   button.addEventListener ("click",() => {
      if (usedNumbers.size === 21) {
          santa.innerHTML = "Done!";
          return;
      }
      let x;
      do {
          x = Math.floor(Math.random() * 21) + 1;
      } while (usedNumbers.has(x));
      usedNumbers.add(x);
      santa.innerHTML = x;
      let allNumbers = Array.from(usedNumbers);
      tableBody.innerHTML = ""; // clear before re-rendering

      for (let i = 0; i < allNumbers.length; i += 3) {
        let row = document.createElement("tr");
        row.innerHTML = `
          <td>${allNumbers[i] ?? ""}</td>
          <td>${allNumbers[i + 1] ?? ""}</td>
          <td>${allNumbers[i + 2] ?? ""}</td>
        `;
        tableBody.appendChild(row);
      }
   });
</script>
</body>

</html>

